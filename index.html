<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CarpetVue - Online Carpet Visualizer | Try Your Design Instantly</title>
<meta name="description" content="Visualize your carpet design in any room instantly. Upload, drag, and see how your custom carpet looks in real living spaces. Perfect for designers, shops, and clients." />
<meta name="author" content="CarpetVue" />
<meta property="og:title" content="CarpetVue - Online Carpet Visualizer" />
<meta property="og:description" content="See how your custom carpet will look inside a real living room. Upload your design, drag it on the floor, and visualize your project in seconds—no Photoshop needed." />
<meta property="og:type" content="website" />
<style>
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial;background:#07101a;color:#e6eef8;padding:16px;}
.app{display:grid;grid-template-columns:360px 1fr;gap:16px;max-width:1100px;margin:0 auto;}
.card{background:rgba(255,255,255,0.02);padding:16px;border-radius:12px;box-shadow:0 6px 24px rgba(2,6,23,0.6);}
h1{margin:0 0 12px 0;font-size:18px;}
label{display:block;font-size:12px;color:#94a3b8;margin-top:10px;}
input[type=file]{width:100%;}
.btn{display:inline-block;padding:8px 12px;border-radius:8px;border:0;background:#7c3aed;color:#fff;cursor:pointer;margin-top:10px;}
.controls{gap:8px;}
.range{width:100%;}
.canvas-wrap{display:flex;align-items:center;justify-content:center;min-height:560px;border-radius:12px;overflow:hidden;background:#07101a;}
canvas{max-width:100%;height:auto;display:block;}
.thumbs{display:flex;gap:8px;margin-top:10px;}
.thumbs img{height:60px;border-radius:8px;cursor:pointer;object-fit:cover;border:2px solid transparent;}
.thumbs img.selected{border-color:#7c3aed;}
.meta{font-size:12px;color:#94a3b8;margin-top:6px;}
.row{display:flex;gap:8px;align-items:center;}
.small{font-size:13px;}
footer{margin-top:12px;font-size:12px;color:#94a3b8;}
@media(max-width:880px){.app{grid-template-columns:1fr;}.canvas-wrap{min-height:420px}}
</style>
</head>
<body>
<div class="app">
  <div class="card">
    <h1>CarpetVue - Controls</h1>
    <label>1) Upload room photo</label>
    <input id="roomFile" type="file" accept="image/*">
    <label>2) Upload carpet/texture or pick a sample</label>
    <input id="carpetFile" type="file" accept="image/*">
    <div class="thumbs" id="sampleThumbs"></div>
    <label>3) Position & transform</label>
    <div class="controls">
      <div class="row small"><span style="width:90px">X</span><input id="posX" class="range" type="range" min="-1000" max="1000" value="0"></div>
      <div class="row small"><span style="width:90px">Y</span><input id="posY" class="range" type="range" min="-1000" max="1000" value="0"></div>
      <div class="row small"><span style="width:90px">Scale</span><input id="scale" class="range" type="range" min="0.1" max="4" step="0.01" value="1"></div>
      <div class="row small"><span style="width:90px">Rotate</span><input id="rotate" class="range" type="range" min="-180" max="180" value="0"></div>
      <div class="row small"><span style="width:90px">Opacity</span><input id="opacity" class="range" type="range" min="0" max="1" step="0.01" value="1"></div>
      <div class="row small"><span style="width:90px">Blend</span><select id="blendMode"><option value="source-over">Normal</option><option value="multiply">Multiply</option><option value="screen">Screen</option><option value="overlay">Overlay</option><option value="soft-light">Soft Light</option><option value="hard-light">Hard Light</option></select></div>
    </div>
    <label>4) Quick actions</label>
    <div class="row"><button class="btn" id="fitCarpet">Fit carpet</button><button class="btn" id="centerCarpet">Center</button></div>
    <div style="margin-top:12px"><button class="btn" id="downloadBtn">Download preview</button><button class="btn" id="resetBtn" style="background:#334155">Reset</button></div>
    <div class="meta">Tip: click & drag the carpet on the preview to move it. Use sliders to fine-tune.</div>
    <footer>Created for CarpetVue — save as <strong>index.html</strong> and open in a browser. Upload images from your computer.</footer>
  </div>
  <div class="card canvas-wrap"><canvas id="stage" width="1200" height="800"></canvas></div>
</div>
<script>
const el=id=>document.getElementById(id);
const canvas=el('stage');
const ctx=canvas.getContext('2d');
let DPR=Math.max(1,window.devicePixelRatio||1);
const state={roomImg:null,carpetImg:null,posX:0,posY:0,scale:1,rotate:0,opacity:1,blend:'source-over',dragging:false,dragOffset:{x:0,y:0}};
const samples=[
{title:'Maroon Stripes',data:'data:image/svg+xml;utf8,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="100%" height="100%" fill="#7b1f3a"/><rect x="0" y="0" width="800" height="100" fill="#f1d9c2"/><rect x="0" y="200" width="800" height="100" fill="#f1d9c2"/><rect x="0" y="400" width="800" height="100" fill="#f1d9c2"/></svg>')},
{title:'Kilim',data:'data:image/svg+xml;utf8,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="100%" height="100%" fill="#b5651d"/><rect x="40" y="40" width="80" height="80" fill="#ffe5d1"/><rect x="140" y="140" width="80" height="80" fill="#ffe5d1"/><rect x="240" y="40" width="80" height="80" fill="#ffe5d1"/></svg>')},
{title:'Green Geometric',data:'data:image/svg+xml;utf8,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="100%" height="100%" fill="#1f6f5a"/><rect x="40" y="40" width="80" height="80" fill="#d7f2e6"/><rect x="140" y="140" width="80" height="80" fill="#d7f2e6"/><rect x="240" y="40" width="80" height="80" fill="#d7f2e6"/></svg>')}
];
const thumbs=el('sampleThumbs');
samples.forEach((s,i)=>{const img=new Image();img.src=s.data;img.title=s.title;img.addEventListener('click',()=>{selectSample(i)});thumbs.appendChild(img);});
function selectSample(i){const imgs=thumbs.querySelectorAll('img');imgs.forEach(n=>n.classList.remove('selected'));thumbs.children[i].classList.add('selected');const img=new Image();img.onload=()=>{state.carpetImg=img;fitCarpetToCenter();render();};img.src=samples[i].data;}
roomFile.addEventListener('change',e=>{const f=e.target.files[0];if(!f)return;const url=URL.createObjectURL(f);const img=new Image();img.onload=()=>{state.roomImg=img;fitCanvasToRoom();render();URL.revokeObjectURL(url);};img.src=url;});
carpetFile.addEventListener('change',e=>{const f=e.target.files[0];if(!f)return;const url=URL.createObjectURL(f);const img=new Image();img.onload=()=>{state.carpetImg=img;fitCarpetToCenter();render();URL.revokeObjectURL(url);};img.src=url;});
['posX','posY','scale','rotate','opacity','blendMode'].forEach(id=>{const node=el(id);node.addEventListener('input',()=>{if(id==='posX')state.posX=parseFloat(node.value);if(id==='posY')state.posY=parseFloat(node.value);if(id==='scale')state.scale=parseFloat(node.value);if(id==='rotate')state.rotate=parseFloat(node.value);if(id==='opacity')state.opacity=parseFloat(node.value);if(id==='blendMode')state.blend=node.value;render();});});
el('fitCarpet').addEventListener('click',()=>{fitCarpetToFloor();render();});
el('centerCarpet').addEventListener('click',()=>{fitCarpetToCenter();render();});
el('resetBtn').addEventListener('click',resetAll);
el('downloadBtn').addEventListener('click',()=>{const url=canvas.toDataURL('image/png');const a=document.createElement('a');a.href=url;a.download='carpet-preview.png';a.click();});
function resetAll(){state.roomImg=null;state.carpetImg=null;state.posX=0;state.posY=0;state.scale=1;state.rotate=0;state.opacity=1;state.blend='source-over';roomFile.value='';carpetFile.value='';thumbs.querySelectorAll('img').forEach(n=>n.classList.remove('selected'));fitCanvasSize(1200,800);render();}
function fitCanvasToRoom(){if(!state.roomImg)return;const w=Math.min(1400,state.roomImg.width);const h=Math.round(w*state.roomImg.height/state.roomImg.width);fitCanvasSize(w,h);}
function fitCanvasSize(w,h){canvas.width=Math.round(w*DPR);canvas.height=Math.round(h*DPR);canvas.style.width=w+'px';canvas.style.height=h+'px';ctx.setTransform(DPR,0,0,DPR,0,0);}
function fitCarpetToCenter(){if(!state.carpetImg)return;const cw=canvas.width/DPR;const ch=canvas.height/DPR;state.scale=Math.min((cw*0.6)/state.carpetImg.width,(ch*0.45)/state.carpetImg.height);state.posX=(cw-state.carpetImg.width*state.scale)/2;state.posY=(ch-state.carpetImg.height*state.scale)/2+ch*0.25;syncUI();}
function fitCarpetToFloor(){if(!state.carpetImg||!state.roomImg)return;const cw=canvas.width/DPR;const ch=canvas.height/DPR;state.scale=Math.min((cw*0.9)/state.carpetImg.width,(ch*0.5)/state.carpetImg.height);state.posX=(cw-state.carpetImg.width*state.scale)/2;state.posY=ch*0.5;syncUI();}
function syncUI(){el('posX').value=state.posX;el('posY').value=state.posY;el('scale').value=state.scale;el('rotate').value=state.rotate;el('opacity').value=state.opacity;el('blendMode').value=state.blend;}
function clear(){ctx.clearRect(0,0,canvas.width,canvas.height);}
function render(){clear();const cw=canvas.width/DPR;const ch=canvas.height/DPR;ctx.save();ctx.fillStyle='#07101a';ctx.fillRect(0,0,cw,ch);ctx.restore();if(state.roomImg){const r=fitRect(state.roomImg.width,state.roomImg.height,cw,ch);ctx.drawImage(state.roomImg,r.x,r.y,r.w,r.h);}if(state.carpetImg){ctx.save();ctx.globalAlpha=state.opacity;ctx.globalCompositeOperation=state.blend;const dx=state.posX;const dy=state.posY;const dw=state.carpetImg.width*state.scale;const dh=state.carpetImg.height*state.scale;ctx.translate(dx+dw/2,dy+dh/2);ctx.rotate(state.rotate*Math.PI/180);ctx.drawImage(state.carpetImg,-dw/2,-dh/2,dw,dh);ctx.restore();}}
function fitRect(iw,ih,ow,oh){const ir=iw/ih;const or=ow/oh;let w,h,x=0,y=0;if(ir>or){w=ow;h=ow/ir;x=0;y=(oh-h)/2;}else{h=oh;w=oh*ir;x=(ow-w)/2;y=0;}return{x,y,w,h};}
let isPointerDown=false;
canvas.addEventListener('pointerdown',e=>{const rect=canvas.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;if(!state.carpetImg)return;const cw=canvas.width/DPR;const ch=canvas.height/DPR;const dw=state.carpetImg.width*state.scale;const dh=state.carpetImg.height*state.scale;const cx=state.posX+dw/2;const cy=state.posY+dh/2;const angle=-state.rotate*Math.PI/180;const lx=Math.cos(angle)*(x-cx)-Math.sin(angle)*(y-cy)+dw/2;const ly=Math.sin(angle)*(x-cx)+Math.cos(angle)*(y-cy)+dh/2;if(lx>=0&&ly>=0&&lx<=dw&&ly<=dh){isPointerDown=true;canvas.setPointerCapture(e.pointerId);state.dragging=true;state.dragOffset.x=x-state.posX;state.dragOffset.y=y-state.posY;}});
canvas.addEventListener('pointermove',e=>{if(!isPointerDown||!state.dragging)return;const rect=canvas.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;state.posX=x-state.dragOffset.x;state.posY=y-state.dragOffset.y;syncUI();render();});
canvas.addEventListener('pointerup',e=>{isPointerDown=false;state.dragging=false;try{canvas.releasePointerCapture(e.pointerId);}catch(e){}});
fitCanvasSize(1200,800);render();
</script>
</body>
</html>
